! VRRP Configuration file for keepalived
! This file autogenerated by Chef
! Do not edit, changes will be overwritten

vrrp_instance <%= @name.upcase %> {
  interface <%= @params["interface"] %>
  virtual_router_id <%= @params["virtual_router_id"] %>
  state <%= @params["state"] %>
  priority <%= @params["priority"] %>
  <% if @params["nopreempt"] %>
  nopreempt
  <% end -%>
  <% if @params.has_key?("advert_int") %>
  advert_int <%= @params["advert_int"] %>
  <% end -%>
  <% if @params.has_key?("auth_type") %>
  authentication {
    auth_type <%= @params["auth_type"].to_s.upcase %>
    auth_pass <%= @params["auth_pass"] %>
  }
  <% end -%>
  <% if @params.has_key?("virtual_ipaddress") %>
  virtual_ipaddress {
    <% @params['virtual_ipaddress'].each do |address| %>
      <%= address %>
    <% end %>
  }
  <% end -%>
  <% if @params.has_key?("track_script") %>
  track_script {
    <%= @params["track_script"] %>
  }
  <% end -%>

  <% if @params.has_key?("notify_master") %>
  notify_master "<%= @params['notify_master'] %>"
  <% end -%>
  <% if @params.has_key?("notify_backup") %>
  notify_backup "<%= @params["notify_backup"] %>"
  <% end -%>
  <% if @params.has_key?("notify_fault") %>
  notify_fault "<%=@params["notify_fault"] %>"
  <% end -%>
  <% if @params.has_key?("notify_stop") %>
  notify_stop "<%=@params["notify_stop"] %>"
  <% end -%>
}
